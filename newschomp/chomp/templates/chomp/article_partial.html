{% load static %}
{% if article %}
    <article class="article-card">
        <div class="card-header">
            <span class="section-category">{% if category == 'color' %}LOCAL{% else %}{{ category|upper }}{% endif %}</span>
            <span class="llm-model">{{ llm_model }}</span>
            <div class="button-row">
                <span class="click-hint">click!>></span>
                <img src="{% static 'chomp/images/mouth.png' %}" alt="Refresh" title="{% if category == 'color' %}GEN. LOCAL CHOMP{% else %}CHOMP WORLD NEWS{% endif %}" class="refresh-btn" data-category="{{ category }}" data-frame1="{% static 'chomp/images/mouth.png' %}" data-frame2="{% static 'chomp/images/mouth-2.png' %}">
                {% if category == 'color' %}
                    <button class="local-chomp-btn" title="generate chomp closest to you">(X)</button>
                {% endif %}
            </div>
        </div>
        <h3 class="article-title">
            <a href="{{ article.url }}" target="_blank" title="{{ article.url }}">
                {% if article.ai_title %}
                    {{ article.ai_title }}
                {% else %}
                    {{ article.title }}
                {% endif %}
            </a>
        </h3>
        {% if article.image_url %}
            <img src="{{ article.image_url }}" alt="{{ article.title }}" class="article-image">
        {% endif %}
        {% if article.summary %}
            <ul class="summary">
                {% for line in article.summary.splitlines %}
                    {% if line.strip %}
                        <li>{{ line }}</li>
                    {% endif %}
                {% endfor %}
            </ul>
        {% endif %}
        <div class="article-meta">
            <div class="meta-line">
                <span class="source">{{ article.source }}</span>
                {% if article.pub_date %}
                    <span class="pub-date">{{ article.pub_date|date:"M d, Y" }}</span>
                {% endif %}
            </div>
            {% if article.topics %}
                <div class="topics">
                    {% for topic in article.topics %}
                        <span class="topic">{{ topic }}</span>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </article>
{% else %}
    <div class="empty-state">
        <div class="card-header">
            <span class="section-category">{% if category == 'color' %}LOCAL{% else %}{{ category|upper }}{% endif %}</span>
            <span class="llm-model">{{ llm_model }}</span>
        </div>
        <div class="empty-state-inner">
            <div class="empty-state-mouth">
                <img src="{% static 'chomp/images/mouth.png' %}" alt="Refresh" title="GENERATE NEW CHOMP" class="refresh-btn" data-category="{{ category }}" data-frame1="{% static 'chomp/images/mouth.png' %}" data-frame2="{% static 'chomp/images/mouth-2.png' %}">
            </div>
            <div class="empty-state-footer">
                <p class="empty-state-text">{% if category == 'world' %}chomping world news{% else %}generating local news chomps :){% endif %}</p>
            </div>
        </div>
    </div>
{% endif %}
